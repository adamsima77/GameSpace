import{_ as p,c as m,b as l,h as a,j as d,v as h,n as o,i as f,o as c}from"./index-DrA51BzS.js";const V={data(){return{name:"",surname:"",email:"",city:"",street:"",postal_code:"",telephone:"",userStore:null,res:{},touched:{email:!1,name:!1,surname:!1,city:!1,street:!1,postal_code:!1,telephone_number:!1}}},methods:{async save(){try{(await this.$axios.post("http://localhost/GameSpace/endpoints/update/save_user.php",{name:this.name,surname:this.surname,email:this.email,city:this.city,street:this.street,postal_code:this.postal_code,mobile_number:this.telephone},{withCredentials:!0})).data.message==="success"?alert("Vaše údaje boli úspešne upravené!"):alert("Nastala chyba pri úprave vašich údajov!")}catch{alert("Nastala chyba pri úprave vašich údajov!")}},async fetchUserData(){try{const i=await this.$axios.post("http://localhost/GameSpace/endpoints/fetch/fetch_user_data.php",{},{withCredentials:!0});this.res=i.data,this.name=this.res.name||"",this.surname=this.res.last_name||"",this.email=this.res.email||"",this.city=this.res.city||"",this.street=this.res.street||"",this.postal_code=this.res.postal_code||"",this.telephone=this.res.mobile_number||""}catch{}},checkTelephoneNumber(i){if(!i)return!1;let e=0,u=0;for(let n=0;n<i.length;n++){const t=i[n];if(t==="+"){if(e++,n!==0)return!1}else if(t>="0"&&t<="9")u++;else{if(t===" ")continue;return!1}}return!(e>1||u<5||u>15)},isFirstLetterUpper(i){if(!i)return!1;const e=i.charAt(0);return e===e.toUpperCase()},checkPostalCode(i){if(!i)return!1;let e=0,u=!0;for(let n=0;n<i.length;n++){const t=i[n];if(!(t>="0"&&t<="9")&&t!==" "){u=!1;break}t>="0"&&t<="9"&&e++}return u&&e===5},checkEmail(i){return i?i.includes("@"):!1}},computed:{isFormValid(){return(!this.touched.name||this.isName)&&(!this.touched.surname||this.isSurnameValid)&&(!this.touched.city||this.isCityValid)&&(!this.touched.street||this.isStreetValid)&&(!this.touched.postal_code||this.isPostalValid)&&(!this.touched.telephone_number||this.isTelephoneValid)&&(!this.touched.email||this.isEmailValid)},isTelephoneValid(){return this.checkTelephoneNumber(this.telephone)},isEmailValid(){return this.checkEmail(this.email)},isName(){return this.name&&this.isFirstLetterUpper(this.name)},isSurnameValid(){return this.surname&&this.surname.length>=2&&this.isFirstLetterUpper(this.surname)},isCityValid(){return this.city&&this.city.length>=2&&this.isFirstLetterUpper(this.city)},isStreetValid(){return this.street&&this.street.length>=2&&this.isFirstLetterUpper(this.street)},isPostalValid(){return this.checkPostalCode(this.postal_code)}},mounted(){this.fetchUserData()}},y={class:"profile_wrapper"},b={class:"inputs"},v={for:"name"},_={for:"surname"},g={for:"telephone"},U={for:"email"},x={for:"city"},C={for:"street"},S={for:"postal_code"},k=["disabled"];function N(i,e,u,n,t,r){return c(),m("div",y,[l("form",{class:"profile-form",onSubmit:e[14]||(e[14]=f((...s)=>r.save&&r.save(...s),["prevent"]))},[e[23]||(e[23]=l("h1",{style:{"text-align":"center"}},"Osobné údaje",-1)),l("div",b,[l("label",v,[e[15]||(e[15]=a("Meno: ",-1)),d(l("input",{type:"text",onInput:e[0]||(e[0]=s=>t.touched.name=!0),id:"name","onUpdate:modelValue":e[1]||(e[1]=s=>t.name=s),class:o({bad_input:!r.isName&&t.touched.name,good_input:r.isName&&t.touched.name})},null,34),[[h,t.name]])]),l("label",_,[e[16]||(e[16]=a("Priezvisko: ",-1)),d(l("input",{type:"text",id:"surname","onUpdate:modelValue":e[2]||(e[2]=s=>t.surname=s),onInput:e[3]||(e[3]=s=>t.touched.surname=!0),class:o({bad_input:!r.isSurnameValid&&t.touched.surname,good_input:r.isSurnameValid&&t.touched.surname})},null,34),[[h,t.surname]])]),l("label",g,[e[17]||(e[17]=a("Telefónne číslo: ",-1)),d(l("input",{type:"text",id:"telephone","onUpdate:modelValue":e[4]||(e[4]=s=>t.telephone=s),onInput:e[5]||(e[5]=s=>t.touched.telephone_number=!0),class:o({bad_input:!r.isTelephoneValid&&t.touched.telephone_number,good_input:r.isTelephoneValid&&t.touched.telephone_number})},null,34),[[h,t.telephone]])]),l("label",U,[e[18]||(e[18]=a("E-mail: ",-1)),d(l("input",{type:"email",id:"email","onUpdate:modelValue":e[6]||(e[6]=s=>t.email=s),onInput:e[7]||(e[7]=s=>t.touched.email=!0),class:o({bad_input:!r.isEmailValid&&t.touched.email,good_input:r.isEmailValid&&t.touched.email})},null,34),[[h,t.email]])]),e[22]||(e[22]=l("h1",null,"Adresa",-1)),l("label",x,[e[19]||(e[19]=a("Mesto: ",-1)),d(l("input",{type:"text",id:"city","onUpdate:modelValue":e[8]||(e[8]=s=>t.city=s),onInput:e[9]||(e[9]=s=>t.touched.city=!0),class:o({bad_input:!r.isCityValid&&t.touched.city,good_input:r.isCityValid&&t.touched.city})},null,34),[[h,t.city]])]),l("label",C,[e[20]||(e[20]=a("Ulica: ",-1)),d(l("input",{type:"text",id:"street","onUpdate:modelValue":e[10]||(e[10]=s=>t.street=s),onInput:e[11]||(e[11]=s=>t.touched.street=!0),class:o({bad_input:!r.isStreetValid&&t.touched.street,good_input:r.isStreetValid&&t.touched.street})},null,34),[[h,t.street]])]),l("label",S,[e[21]||(e[21]=a("Poštové číslo: ",-1)),d(l("input",{type:"text",id:"postal_code","onUpdate:modelValue":e[12]||(e[12]=s=>t.postal_code=s),onInput:e[13]||(e[13]=s=>t.touched.postal_code=!0),class:o({bad_input:!r.isPostalValid&&t.touched.postal_code,good_input:r.isPostalValid&&t.touched.postal_code})},null,34),[[h,t.postal_code]])]),l("input",{type:"submit",value:"Upraviť údaje",disabled:!r.isFormValid,class:o({not_valid:!r.isFormValid})},null,10,k)])],32)])}const P=p(V,[["render",N],["__scopeId","data-v-71a3c443"]]);export{P as default};

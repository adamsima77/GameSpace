import{_ as v,c as m,b as i,h as a,j as h,v as p,n as u,q as y,F as b,e as V,d as S,w as _,r as k,u as C,o as d,t as c}from"./index-CyFD_r_B.js";const U={data(){return{transits:[],payments:[],email:"",name:"",surname:"",city:"",street:"",postal_code:"",telephone_number:"",transport:-1,payment:-1,errors:{email:!1,name:!1,surname:!1,city:!1,street:!1,postal_code:!1,telephone_number:!1,transport:!1,payment:!1},cartStore:null,touched:{email:!1,name:!1,surname:!1,city:!1,street:!1,postal_code:!1,telephone_number:!1,transport:!1,payment:!1}}},created(){this.cartStore=C()},methods:{async fetchTransits(){try{const r=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetch_transit.php",{withCredentials:!1});this.transits=r.data}catch{}},async fetchPayments(){try{const r=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetch_payments.php",{withCredentials:!1});this.payments=r.data}catch{}},checkVariables(){this.onLoad=!1,this.email===""?this.errors.email=!0:this.errors.email=!1,!this.name||this.name.length<2||!this.isFirstLetterUpper(this.name)?this.errors.name=!0:this.errors.name=!1,!this.surname||this.surname.length<2||!this.isFirstLetterUpper(this.surname)?this.errors.surname=!0:this.errors.surname=!1,!this.city||this.city.length<2||!this.isFirstLetterUpper(this.city)?this.errors.city=!0:this.errors.city=!1,!this.street||this.street.length<2||!this.isFirstLetterUpper(this.street)?this.errors.street=!0:this.errors.street=!1,!this.postal_code||!this.checkPostalCode(this.postal_code)?this.errors.postal_code=!0:this.errors.postal_code=!1,!this.telephone_number||!this.checkTelephoneNumber(this.telephone_number)?this.errors.telephone_number=!0:this.errors.telephone_number=!1,this.transport===-1?this.errors.transport=!0:this.errors.transport=!1,this.payment===-1?this.errors.payment=!0:this.errors.payment=!1,this.errors.email||this.errors.name||this.errors.surname||this.errors.city||this.errors.street||this.errors.postal_code||this.errors.telephone_number||this.errors.transport||this.errors.payment||(this.cartStore.setDelivery(this.email,this.name,this.surname,this.city,this.street,this.postal_code,this.telephone_number,this.transport,this.payment),this.$router.push({name:"checkout"}))},checkTelephoneNumber(r){if(!r)return!1;let e=0,o=0;for(let l=0;l<r.length;l++){const t=r[l];if(t==="+"){if(e++,l!==0)return!1}else if(t>="0"&&t<="9")o++;else{if(t==" ")continue;return!1}}return!(e>1||o<5||o>15)},isFirstLetterUpper(r){if(!r)return!1;const e=r.charAt(0);return e===e.toUpperCase()},checkPostalCode(r){if(!r||r.length>5)return!1;let e=0,o=!0;for(let l=0;l<r.length;l++){if(!(r[l]>="0"&&r[l]<="9"||r[l]===" ")){o=!1;break}r[l]>="0"&&r[l]<="9"&&e++}return e!==5?!1:!!o},ifDeclaredAssign(){this.email=this.cartStore.email,this.name=this.cartStore.name,this.surname=this.cartStore.surname,this.city=this.cartStore.city,this.street=this.cartStore.street,this.postal_code=this.cartStore.postal_code,this.telephone_number=this.cartStore.telephone_number,this.transport=this.cartStore.transport,this.payment=this.cartStore.payment},checkEmail(r){let e=!1;for(let o=0;o<r.length;o++)r.charAt(o)=="@"&&(e=!0);return e}},computed:{isFormValid(){return this.isEmailValid&&this.isName&&this.isSurnameValid&&this.isCityValid&&this.isStreetValid&&this.isPostalValid&&this.isTelephoneValid&&this.isTransportValid&&this.isPaymentValid},isTelephoneValid(){return this.checkTelephoneNumber(this.telephone_number)},isEmailValid(){return this.checkEmail(this.email)},isName(){return this.isFirstLetterUpper(this.name)},isSurnameValid(){return this.surname.length>=2&&this.isFirstLetterUpper(this.surname)},isCityValid(){return this.city.length>=2&&this.isFirstLetterUpper(this.city)},isStreetValid(){return this.street.length>=2&&this.isFirstLetterUpper(this.street)},isPostalValid(){return this.checkPostalCode(this.postal_code)},isTransportValid(){return this.transport!==-1},isPaymentValid(){return this.payment!==-1}},mounted(){this.fetchTransits(),this.fetchPayments(),this.ifDeclaredAssign()}},P={class:"inputs"},T={for:"email"},x={for:"name"},F={for:"surname"},L={for:"city"},j={for:"street"},E={for:"postal"},N={for:"phone_num"},I={for:"transit"},w=["value"],D={for:"payment"},Z=["value"],A={class:"buttons"},M=["disabled"];function z(r,e,o,l,t,n){const g=k("RouterLink");return d(),m("div",P,[e[31]||(e[31]=i("h1",null,"Adresa doručenia",-1)),i("label",T,[e[19]||(e[19]=a("E-mail: ",-1)),h(i("input",{type:"text",class:u({bad_input:!n.isEmailValid&&t.touched.email,good_input:n.isEmailValid&&t.touched.email}),onInput:e[0]||(e[0]=s=>t.touched.email=!0),"onUpdate:modelValue":e[1]||(e[1]=s=>t.email=s),id:"email",placeholder:"Zadajte E-mail..."},null,34),[[p,t.email]])]),i("label",x,[e[20]||(e[20]=a("Meno: ",-1)),h(i("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>t.name=s),class:u({bad_input:!n.isName&&t.touched.name,good_input:n.isName&&t.touched.name}),onInput:e[3]||(e[3]=s=>t.touched.name=!0),id:"name",placeholder:"Zadajte meno..."},null,34),[[p,t.name]])]),i("label",F,[e[21]||(e[21]=a("Priezvisko ",-1)),h(i("input",{type:"text",class:u({bad_input:!n.isSurnameValid&&t.touched.surname,good_input:n.isSurnameValid&&t.touched.surname}),onInput:e[4]||(e[4]=s=>t.touched.surname=!0),"onUpdate:modelValue":e[5]||(e[5]=s=>t.surname=s),id:"surname",placeholder:"Zadajte priezvisko..."},null,34),[[p,t.surname]])]),i("label",L,[e[22]||(e[22]=a("Mesto: ",-1)),h(i("input",{type:"text",class:u({bad_input:!n.isCityValid&&t.touched.city,good_input:n.isCityValid&&t.touched.city}),onInput:e[6]||(e[6]=s=>t.touched.city=!0),"onUpdate:modelValue":e[7]||(e[7]=s=>t.city=s),id:"city",placeholder:"Zadajte mesto..."},null,34),[[p,t.city]])]),i("label",j,[e[23]||(e[23]=a("Ulica: ",-1)),h(i("input",{type:"text",class:u({bad_input:!n.isStreetValid&&t.touched.street,good_input:n.isStreetValid&&t.touched.street}),onInput:e[8]||(e[8]=s=>t.touched.street=!0),"onUpdate:modelValue":e[9]||(e[9]=s=>t.street=s),id:"street",placeholder:"Zadajte ulicu..."},null,34),[[p,t.street]])]),i("label",E,[e[24]||(e[24]=a("PSČ: ",-1)),h(i("input",{type:"text",class:u({bad_input:!n.isPostalValid&&t.touched.postal_code,good_input:n.isPostalValid&&t.touched.postal_code}),onInput:e[10]||(e[10]=s=>t.touched.postal_code=!0),"onUpdate:modelValue":e[11]||(e[11]=s=>t.postal_code=s),id:"postal",placeholder:"Zadajte PSČ..."},null,34),[[p,t.postal_code]])]),i("label",N,[e[25]||(e[25]=a("Telefónne číslo: ",-1)),h(i("input",{type:"text",class:u({bad_input:!n.isTelephoneValid&&t.touched.telephone_number,good_input:n.isTelephoneValid&&t.touched.telephone_number}),onInput:e[12]||(e[12]=s=>t.touched.telephone_number=!0),"onUpdate:modelValue":e[13]||(e[13]=s=>t.telephone_number=s),id:"phone_num",placeholder:"Zadajte telefónne číslo..."},null,34),[[p,t.telephone_number]])]),e[32]||(e[32]=i("h1",null,"Spôsob dopravy",-1)),i("label",I,[e[27]||(e[27]=a("Vyberte spôsob dopravy: ",-1)),h(i("select",{id:"transit",name:"","onUpdate:modelValue":e[14]||(e[14]=s=>t.transport=s),class:u({bad_input:!n.isTransportValid&&t.touched.transport,good_input:n.isTransportValid&&t.touched.transport}),onChange:e[15]||(e[15]=s=>t.touched.transport=!0)},[e[26]||(e[26]=i("option",{disabled:"",value:"-1"},"Vyberte spôsob dopravy...",-1)),(d(!0),m(b,null,V(t.transits,(s,f)=>(d(),m("option",{value:s.id,key:f},c(s.name),9,w))),128))],34),[[y,t.transport,void 0,{number:!0}]])]),i("label",D,[e[29]||(e[29]=a("Vyberte spôsob platby: ",-1)),h(i("select",{id:"payment",name:"","onUpdate:modelValue":e[16]||(e[16]=s=>t.payment=s),class:u({bad_input:!n.isPaymentValid&&t.touched.payment,good_input:n.isPaymentValid&&t.touched.payment}),onChange:e[17]||(e[17]=s=>t.touched.payment=!0)},[e[28]||(e[28]=i("option",{disabled:"",value:"-1"},"Vyberte spôsob platby...",-1)),(d(!0),m(b,null,V(t.payments,(s,f)=>(d(),m("option",{value:s.id,key:f},c(s.name),9,Z))),128))],34),[[y,t.payment,void 0,{number:!0}]])]),i("div",A,[S(g,{to:{name:"cart"}},{default:_(()=>[...e[30]||(e[30]=[a("Prejsť na košík",-1)])]),_:1}),i("button",{onClick:e[18]||(e[18]=s=>n.checkVariables()),disabled:!n.isFormValid,class:u({disabled_btn:!n.isFormValid})},"Prejsť na pokladňu",10,M)])])}const G=v(U,[["render",z],["__scopeId","data-v-bca05ef2"]]);export{G as default};

import{A as i}from"./AdminTable-B8BKptuX.js";import{_ as n,c as r,b as o,d,r as p,o as c}from"./index-DioUgQHd.js";const h={data(){return{res:[],total_pages:0,actual_page:1,limit:10}},methods:{updateRecord(e){this.$router.push({name:"update-slideshow",params:{id:e}})},async deleteRecord(e){try{if(confirm("Chcete tento záznam naozaj vymazať !"))(await this.$axios.post("http://localhost/GameSpace/endpoints/delete/delete_slideshow.php",{id:e},{withCredentials:!1})).data.message==="success"?(alert("Záznam bol úspešne vymazaný !"),await this.fetchSlideshow()):alert("Záznam sa nepodarilo vymazať !");else return}catch{}},async fetchSlideshow(){const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/getSlideshowAdmin.php",{params:{limit:this.limit,offset:this.limit*(this.actual_page-1)},withCredentials:!1});this.res=e.data},async getTotalPages(){try{const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/getTotalPagesSlideshow.php",{withCredentials:!1});this.total_pages=e.data.total_pages}catch{}},async changePage(e){this.actual_page=e,await this.fetchSlideshow()}},mounted(){this.getTotalPages(),this.fetchSlideshow()},components:{AdminTable:i}},m={class:"wrapper"},g={class:"wrapp"};function u(e,a,_,f,t,s){const l=p("AdminTable");return c(),r("div",m,[o("div",g,[a[1]||(a[1]=o("h1",null,"Slideshow",-1)),o("button",{onClick:a[0]||(a[0]=w=>e.$router.push({name:"add-slideshow"}))},"Pridať záznam"),d(l,{onPage:s.changePage,columns:[{label:"ID",key:"id"},{label:"Image",key:"img"},{label:"Image alt",key:"alt"},{label:"Link",key:"link"},{label:"Vytvorenie príspevku",key:"created_at"},{label:"Posledná úprava",key:"last_update"}],records:t.res,total_pages:t.total_pages,limit:t.limit,actual_page:t.actual_page,onDelete:s.deleteRecord,onUpdate:s.updateRecord},null,8,["onPage","records","total_pages","limit","actual_page","onDelete","onUpdate"])])])}const k=n(h,[["render",u],["__scopeId","data-v-92c81f06"]]);export{k as default};

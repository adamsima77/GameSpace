import{A as i}from"./AdminTable-B8BKptuX.js";import{_ as n,c as r,b as o,d as p,r as c,o as d}from"./index-DioUgQHd.js";const m={data(){return{res:[],total_pages:0,actual_page:1,limit:10}},methods:{async deleteRecord(e){try{if(confirm("Chcete naozaj vymazať produkt ?"))(await this.$axios.post("http://localhost/GameSpace/endpoints/delete/delete_item_admin.php",{id:e},{withCredentials:!1})).data.message==="success"?(alert("Produkt bol úspešne vymazaný !"),this.fetchItems()):alert("Nastala chyba pri vymazávaní produktu");else return}catch{}},updateRecord(e){this.$router.push({name:"update-items",params:{id:e}})},async fetchItems(){const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetchItemsAdmin.php",{params:{limit:this.limit,offset:this.limit*(this.actual_page-1)},withCredentials:!1});this.res=e.data},async getTotalPages(){try{const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/getTotalPagesItemsAdmin.php",{withCredentials:!1});this.total_pages=e.data.total_pages}catch{}},async changePage(e){this.actual_page=e,await this.fetchItems()}},mounted(){this.getTotalPages(),this.fetchItems()},components:{AdminTable:i}},h={class:"wrapper"},u={class:"wrapp"};function g(e,t,_,f,a,s){const l=c("AdminTable");return d(),r("div",h,[o("div",u,[t[1]||(t[1]=o("h1",null,"Produkty",-1)),o("button",{onClick:t[0]||(t[0]=y=>this.$router.push({name:"add-items"}))},"Pridať záznam"),p(l,{onPage:s.changePage,columns:[{label:"ID",key:"id"},{label:"Názov produktu",key:"name"},{label:"Image",key:"img"},{label:"Image alt",key:"alt"},{label:"Dátum vydania",key:"release_date"},{label:"Slug",key:"slug"},{label:"Cena",key:"price"},{label:"Popis",key:"description"},{label:"HTML popis",key:"html_description"}],records:a.res,total_pages:a.total_pages,limit:a.limit,actual_page:a.actual_page,onDelete:s.deleteRecord,onUpdate:s.updateRecord},null,8,["onPage","records","total_pages","limit","actual_page","onDelete","onUpdate"])])])}const v=n(m,[["render",g],["__scopeId","data-v-308bd799"]]);export{v as default};

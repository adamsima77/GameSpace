import{A as l}from"./AdminTable-B8BKptuX.js";import{_ as n,c,b as o,d as i,r as d,o as p}from"./index-DioUgQHd.js";const h={data(){return{res:[],total_pages:0,actual_page:1,limit:10}},methods:{async fetchOrders(){const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetchOrdersAdmin.php",{params:{limit:this.limit,offset:this.limit*(this.actual_page-1)},withCredentials:!1});this.res=e.data},async getTotalPages(){try{const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetchTotalPagesOrdersAdmin.php",{withCredentials:!1});this.total_pages=e.data.total_pages}catch{}},async deleteRecord(e){try{if(confirm("Chcete naozaj vymazať objednávku ?"))(await this.$axios.post("http://localhost/GameSpace/endpoints/delete/delete_order_admin.php",{id:e},{withCredentials:!1})).data.message==="success"?(alert("Objednávka bola úspešne vymazaná !"),this.fetchOrders()):alert("Nastala chyba pri vymazávaní objednávky");else return}catch{}},updateRecord(e){this.$router.push({name:"update-orders",params:{id:e}})},async changePage(e){this.actual_page=e,await this.fetchOrders()}},mounted(){this.getTotalPages(),this.fetchOrders()},components:{AdminTable:l}},m={class:"wrapper"},_={class:"wrapp"};function g(e,a,u,f,t,s){const r=d("AdminTable");return p(),c("div",m,[o("div",_,[a[0]||(a[0]=o("h1",null,"Objednávky",-1)),i(r,{onPage:s.changePage,columns:[{label:"ID",key:"id"},{label:"Vytvorenie objednávky",key:"creation_date"},{label:"Posledná úprava",key:"last_update"},{label:"Status",key:"status"},{label:"Celková cena",key:"total_price"}],records:t.res,total_pages:t.total_pages,limit:t.limit,actual_page:t.actual_page,onDelete:s.deleteRecord,onUpdate:s.updateRecord},null,8,["onPage","records","total_pages","limit","actual_page","onDelete","onUpdate"])])])}const v=n(h,[["render",g],["__scopeId","data-v-d4bfd834"]]);export{v as default};

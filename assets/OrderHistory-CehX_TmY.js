import{_,c as a,b as t,F as i,e as c,r as u,o as r,t as n,d as g,w as m,h as f,n as y}from"./index-DioUgQHd.js";const k={data(){return{orders:[],limit:10,actual_page:1,total_pages:0}},methods:{async changePage(s){this.actual_page=s,await this.fetchOrders()},async fetchOrders(){try{const s=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetch_orders.php",{params:{limit:this.limit,offset:(this.actual_page-1)*this.limit},withCredentials:!0});this.orders=s.data}catch{}},async getTotalPages(){try{const s=await this.$axios.post("http://localhost/GameSpace/endpoints/fetch/getTotalPagesOfUserOrders.php",{},{withCredentials:!0});this.total_pages=s.data.total_pages}catch{}}},mounted(){this.fetchOrders(),this.getTotalPages()}},v={class:"order_history"},O={key:0},C={class:"detail"},w={key:1},x={class:"pagination"},D=["onClick"];function P(s,l,b,S,o,d){const h=u("RouterLink");return r(),a(i,null,[t("div",v,[o.orders.length>0?(r(),a("table",O,[l[1]||(l[1]=t("tr",null,[t("th",null,"#ID Objednávky"),t("th",null,"Dátum vytvorenia objednávky"),t("th",null,"Status"),t("th",null,"Cena"),t("th",null,"Detail")],-1)),(r(!0),a(i,null,c(o.orders,(e,p)=>(r(),a("tr",{key:e.id_Orders},[t("td",null,n(e.id_Orders),1),t("td",null,n(e.creation_date),1),t("td",null,n(e.status),1),t("td",null,n(e.total_price)+"€",1),t("td",C,[g(h,{to:{name:"order-detail",params:{id:e.id_Orders}}},{default:m(()=>[...l[0]||(l[0]=[f("Detail",-1)])]),_:1},8,["to"])])]))),128))])):(r(),a("p",w,"Vaša história nákupov je prázdna"))]),t("div",x,[(r(!0),a(i,null,c(Math.ceil(o.total_pages/o.limit),e=>(r(),a("p",{key:e,class:y({active:o.actual_page===e}),onClick:p=>d.changePage(e)},n(e),11,D))),128))])],64)}const V=_(k,[["render",P],["__scopeId","data-v-d188873a"]]);export{V as default};

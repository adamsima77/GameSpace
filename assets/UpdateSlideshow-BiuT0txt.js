import{_ as m,c as o,b as a,i as u,h as n,a as h,j as p,v as r,o as d}from"./index-DrA51BzS.js";const f={data(){return{img:null,alt:"",link:"",img_preview:""}},methods:{async fetchSlide(){try{const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetchSingleSlide.php",{params:{id:this.$route.params.id},withCredentials:!1});this.alt=e.data.alt,this.link=e.data.link,this.img_preview=e.data.img}catch{}},handleFileUpload(e){this.img=e.target.files[0]},async update(){try{const e=new FormData;e.append("img",this.img),e.append("alt",this.alt),e.append("link",this.link),e.append("id",this.$route.params.id);const t=await this.$axios.post("http://localhost/GameSpace/endpoints/update/update_slideshow.php",e,{headers:{"Content-Type":"multipart/form-data"}});t.data.message==="success"?(alert("Záznam bol úspešne upravený !"),this.fetchSlide()):alert("Záznam sa nepodarilo upraviť ! Dôvod: "+t.data.reason)}catch{}}},mounted(){this.fetchSlide(),document.title=this.$route.params.id}},g={class:"wrapper"},v={class:"wrapp"},k={for:"img"},w=["src"],c={for:"alt"},y={for:"link"};function x(e,t,S,U,s,l){return d(),o("div",g,[a("div",v,[t[9]||(t[9]=a("h1",null,"Upraviť záznam",-1)),a("form",{method:"post",onSubmit:t[3]||(t[3]=u((...i)=>l.update&&l.update(...i),["prevent"]))},[a("label",k,[t[4]||(t[4]=n("Image: ",-1)),a("input",{type:"file",id:"img",onChange:t[0]||(t[0]=(...i)=>l.handleFileUpload&&l.handleFileUpload(...i)),accept:"image/*"},null,32),t[5]||(t[5]=a("p",null,"Aktuálna fotka:",-1)),s.img_preview?(d(),o("img",{key:0,src:s.img_preview,alt:"",class:"preview"},null,8,w)):h("",!0)]),a("label",c,[t[6]||(t[6]=n("Alt: ",-1)),p(a("input",{type:"text",id:"alt","onUpdate:modelValue":t[1]||(t[1]=i=>s.alt=i)},null,512),[[r,s.alt]])]),a("label",y,[t[7]||(t[7]=n("Link: ",-1)),p(a("input",{type:"text",id:"link","onUpdate:modelValue":t[2]||(t[2]=i=>s.link=i)},null,512),[[r,s.link]])]),t[8]||(t[8]=a("input",{type:"submit",value:"Upraviť záznam"},null,-1))],32)])])}const b=m(f,[["render",x],["__scopeId","data-v-3fdaa1e4"]]);export{b as default};

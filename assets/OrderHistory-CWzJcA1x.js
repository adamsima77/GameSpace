import{_ as u,c as a,b as t,F as i,e as c,r as _,o,t as n,d as g,w as m,h as f,n as y}from"./index-CyFD_r_B.js";const k={data(){return{orders:[],limit:10,actual_page:1,total_pages:0}},methods:{async changePage(s){this.actual_page=s,await this.fetchOrders()},async fetchOrders(){try{const s=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetch_orders.php",{params:{limit:this.limit,offset:(this.actual_page-1)*this.limit},withCredentials:!0});this.orders=s.data}catch(s){s.response?.status===401&&console.log("Používateľ nie je prihlásený")}},async getTotalPages(){try{const s=await this.$axios.post("http://localhost/GameSpace/endpoints/fetch/getTotalPagesOfUserOrders.php",{},{withCredentials:!0});this.total_pages=s.data.total_pages}catch{}}},mounted(){this.fetchOrders(),this.getTotalPages()}},v={class:"order_history"},O={key:0},C={class:"detail"},w={key:1},b={class:"pagination"},P=["onClick"];function x(s,l,D,j,r,d){const h=_("RouterLink");return o(),a(i,null,[t("div",v,[r.orders.length>0?(o(),a("table",O,[l[1]||(l[1]=t("tr",null,[t("th",null,"#ID Objednávky"),t("th",null,"Dátum vytvorenia objednávky"),t("th",null,"Status"),t("th",null,"Cena"),t("th",null,"Detail")],-1)),(o(!0),a(i,null,c(r.orders,(e,p)=>(o(),a("tr",{key:e.id_Orders},[t("td",null,n(e.id_Orders),1),t("td",null,n(e.creation_date),1),t("td",null,n(e.status),1),t("td",null,n(e.total_price)+"€",1),t("td",C,[g(h,{to:{name:"order-detail",params:{id:e.id_Orders}}},{default:m(()=>[...l[0]||(l[0]=[f("Detail",-1)])]),_:1},8,["to"])])]))),128))])):(o(),a("p",w,"Vaša história nákupov je prázdna"))]),t("div",b,[(o(!0),a(i,null,c(Math.ceil(r.total_pages/r.limit),e=>(o(),a("p",{key:e,class:y({active:r.actual_page===e}),onClick:p=>d.changePage(e)},n(e),11,P))),128))])],64)}const T=u(k,[["render",x],["__scopeId","data-v-bf8c746b"]]);export{T as default};

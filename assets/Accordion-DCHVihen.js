import{A as c}from"./AdminTable-B8BKptuX.js";import{_ as n,c as i,b as s,d as l,r as d,o as p}from"./index-DioUgQHd.js";const h={data(){return{res:[],total_pages:0,actual_page:1,limit:10}},methods:{async deleteRecord(e){try{if(confirm("Chcete naozaj vymazať tento záznam ?"))(await this.$axios.post("http://localhost/GameSpace/endpoints/delete/deleteAccordionRecord.php",{id:e},{withCredentials:!1})).data.message==="success"?(alert("Produkt bol úspešne vymazaný"),this.fetchAccordion()):alert("Produkt sa nepodarilo vymazať !");else return}catch{}},updateRecord(e){this.$router.push({name:"update-accordion",params:{id:e}})},async fetchAccordion(){try{const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/fetchFAQAdmin.php",{params:{limit:this.limit,offset:this.limit*(this.actual_page-1)},withCredentials:!1});this.res=e.data}catch{}},async totalPages(){try{const e=await this.$axios.get("http://localhost/GameSpace/endpoints/fetch/getTotalAccordionPages.php",{withCredentials:!1});this.total_pages=e.data.total_pages}catch{}},async changePage(e){this.actual_page=e,await this.fetchAccordion()}},mounted(){this.fetchAccordion(),this.totalPages()},components:{AdminTable:c}},m={class:"wrapper"},u={class:"wrapp"};function _(e,t,g,f,a,o){const r=d("AdminTable");return p(),i("div",m,[s("div",u,[t[1]||(t[1]=s("h1",null,"Akordeón",-1)),s("button",{onClick:t[0]||(t[0]=y=>e.$router.push({name:"add-accordion"}))},"Pridať záznam"),l(r,{onPage:o.changePage,columns:[{label:"ID",key:"id"},{label:"Názov",key:"title"},{label:"Popis",key:"description"},{label:"Vytvorenie príspevku",key:"created_at"},{label:"Posledná úprava",key:"last_update"}],records:a.res,total_pages:a.total_pages,limit:a.limit,actual_page:a.actual_page,onDelete:o.deleteRecord,onUpdate:o.updateRecord},null,8,["onPage","records","total_pages","limit","actual_page","onDelete","onUpdate"])])])}const k=n(h,[["render",_],["__scopeId","data-v-b5416954"]]);export{k as default};
